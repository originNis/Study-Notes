### 数据库引擎

---

DBMS内部引擎负责处理SQL语句并具体执行，包括管理数据库与表，处理查询请求等。可以通过ENGINE=xxx指定需要使用的引擎。之所以MySQL有多种引擎，是因为它们具有各自不同的特性与功能，例如InnoDB是支持事务处理的引擎，MyISAM是支持全文本搜索，性能极高的引擎。根据具体业务选择引擎是有必要的。

需要注意外键不能跨引擎。

### 函数function

---

大多数普通SQL函数都是可移植的。应该尽可能不使用不可移植的特定功能的函数。

### 聚集函数aggregate function

---

作用于行上，计算出单个值。而普通函数则是作用于行上，单独对每行进行运算。

### 数据分组

---

用GROUP BY将数据分组（进行操作），用HAVING过滤分组。

SQL规范不指定GROUP BY的分组顺序。

### 联结

---

以键为要素将多个表联结起来，注意要维护引用完整性。

语法上可以简单地用WHERE指定各自键的对应关系。

联结多个表性能消耗很大，但有时候联结比子查询性能更好。

1、**自联结**

2、**内部联结**：（ANSI SQL规范指定）等值联结用INNER JOIN ... ON ...

3、**外部联结**：用LEFT/RIGHT OUTER JOIN ... ON ... 被指定的表显示所有行。

### 全文本搜索

---

部分数据库引擎支持全文本搜索，在创建表的时候就能够用FULLTEXT指定全文本搜索列。使用特殊的索引机制使得字符串匹配效率高（单词的索引是动态维护的），而且依据量化匹配程度进行排序。用Match()和Against()进行全文本搜索。

**查询扩展**：能搜索出查找行以及查找行相关的内容。

**布尔方式搜索**：语法IN BOOLEAN MODE 可以细化查找细节，但其并不对返回结果排序。

### 视图VIEW

---

创建方式CREATE VIEW ... AS

视图是虚拟的表，可理解为对SELECT查询的引用。视图可以重用SQL语句、使用表的一部分、保护数据等等。要注意用多层联结或过滤创建或嵌套的视图可能会极大损失性能。虽然视图也可被更新数据，但是一般只应该用于检索。

### 存储过程PROCEDURE

---

创建方式CREATE PROCEDURE ... BEGIN ... END，用CALL ...调用存储过程。

存储过程是对多句SQL语句的封装，类似于C语言的函数，也可以带参数。可以简化操作、为同种操作提供一致性从而防止错误发生。存储过程被创建后保存在服务器上，直到用DROP PROCEDURE删除。

### 游标CURSOR

---

创建游标CREATE CURSOR FOR；打开游标OPEN；关闭游标CLOSE

游标是存储在MySQL服务器上的数据库查询，它是被SELECT检索出的结果集，它有指向行的内部行指针，提供了遍历行的方式。

### 触发器TRIGGER

---

语法：CREATE TRIGGER ... AFTER/BEFORE I/D/U ON ...

触发器是跟表关联的，在特定INSERT/DELETE/UPDATE语句的前后自动执行的MySQL语句。MySQL触发器表内要求名字唯一，但应用中最好保证数据库内唯一。每种触发器只能有一个，意味着一张表最多有6个触发器。

只有表支持触发器，视图不支持。

如果BEFORE触发器失败，则不执行请求操作；如果BEFORE触发器或者语句本身失败，则不执行AFTER触发器。

触发器使用时可以引用名为NEW和OLD的虚拟表，分别是更改前的行与更改后的行。

### 事务处理TRANSACTION

---

事务处理可以保证成批的MySQL操作不中断地执行。通过回退（ROLLBACK）、提交（COMMIT）和保留点（SAVEPOINT）进行事务处理。

### 访问控制

---

MySQL用用户账号的方式限制用户的操作权限（读、写、创建用户等权限），初始的root账号对整个MySQL服务器有控制权限（但现实工作最好使用访问权限合适的账号）。MySQL自带mysql数据库，其中user表包含了所有用户的数据。关键词GRANT和REVOKE可以授予或删除某个用户的某权限。
